{
    "sourceFile": "discount/app/src/main/kotlin/io/nexure/discount/service/DataSeedingService.kt",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1769775279863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1769775279863,
            "name": "Commit-0",
            "content": "package io.nexure.discount.service\n\nimport io.nexure.discount.model.Product\nimport io.nexure.discount.repository.ProductRepository\nimport org.jetbrains.exposed.sql.transactions.transaction\n\n/**\n * Service for seeding initial data into the database\n * Creates sample products for testing the API\n */\nobject DataSeedingService {\n    \n    /**\n     * Initialize the database with sample products for testing\n     * This method is safe to call multiple times (won't create duplicates)\n     */\n    fun seedDatabase(productRepository: ProductRepository) {\n        try {\n            transaction {\n                // Check if data already exists to avoid duplicates\n                val existingProducts = productRepository.findAll()\n                if (existingProducts.isNotEmpty()) {\n                    println(\"Database already contains ${existingProducts.size} products. Skipping seed data.\")\n                    return@transaction\n                }\n                \n                // Create sample products as shown in README examples\n                val sampleProducts = listOf(\n                    // Sweden products (25% VAT)\n                    Product(\n                        id = \"laptop-se\",\n                        name = \"Gaming Laptop\", \n                        basePrice = 1000.0,\n                        country = \"Sweden\"\n                    ),\n                    Product(\n                        id = \"phone-se\",\n                        name = \"Smartphone\",\n                        basePrice = 800.0, \n                        country = \"Sweden\"\n                    ),\n                    Product(\n                        id = \"headphones-se\",\n                        name = \"Wireless Headphones\",\n                        basePrice = 200.0,\n                        country = \"Sweden\"\n                    ),\n                    \n                    // Germany products (19% VAT)\n                    Product(\n                        id = \"laptop-de\", \n                        name = \"Gaming Laptop\",\n                        basePrice = 1200.0,\n                        country = \"Germany\"\n                    ),\n                    Product(\n                        id = \"phone-de\",\n                        name = \"Smartphone\", \n                        basePrice = 900.0,\n                        country = \"Germany\"\n                    ),\n                    Product(\n                        id = \"tablet-de\",\n                        name = \"Tablet Pro\",\n                        basePrice = 600.0,\n                        country = \"Germany\"\n                    ),\n                    \n                    // France products (20% VAT)\n                    Product(\n                        id = \"laptop-fr\",\n                        name = \"Gaming Laptop\",\n                        basePrice = 1100.0,\n                        country = \"France\" \n                    ),\n                    Product(\n                        id = \"phone-fr\",\n                        name = \"Smartphone\",\n                        basePrice = 850.0,\n                        country = \"France\"\n                    ),\n                    Product(\n                        id = \"watch-fr\",\n                        name = \"Smart Watch\",\n                        basePrice = 300.0,\n                        country = \"France\"\n                    )\n                )\n                \n                // Insert sample products\n                sampleProducts.forEach { product ->\n                    try {\n                        productRepository.create(product)\n                        println(\"Created sample product: ${product.id} - ${product.name} (${product.country})\")\n                    } catch (e: Exception) {\n                        println(\"Failed to create product ${product.id}: ${e.message}\")\n                    }\n                }\n                \n                println(\"âœ… Database seeded with ${sampleProducts.size} sample products\")\n                \n                // Print summary by country for verification\n                val productsByCountry = sampleProducts.groupBy { it.country }\n                productsByCountry.forEach { (country, products) ->\n                    val vatRate = VatService.getVatRate(country)\n                    println(\"ğŸ“ $country (${(vatRate * 100).toInt()}% VAT): ${products.size} products\")\n                }\n            }\n        } catch (e: Exception) {\n            println(\"âŒ Failed to seed database: ${e.message}\")\n            e.printStackTrace()\n        }\n    }\n}"
        }
    ]
}