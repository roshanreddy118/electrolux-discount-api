{
    "sourceFile": "discount/app/src/main/kotlin/io/nexure/discount/service/VatService.kt",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1769775282164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1769925647749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,39 +5,41 @@\n  * Contains the business logic for country-specific tax calculations\n  */\n object VatService {\n     \n-    // VAT rates as specified in the requirements\n+    // VAT rates with lowercase keys for case-insensitive lookup\n     private val vatRates = mapOf(\n-        \"Sweden\" to 0.25,   // 25%\n-        \"Germany\" to 0.19,  // 19%\n-        \"France\" to 0.20    // 20%\n+        \"sweden\" to 0.25,   // 25%\n+        \"germany\" to 0.19,  // 19%\n+        \"france\" to 0.20    // 20%\n     )\n     \n     /**\n-     * Get VAT rate for a specific country\n-     * @param country The country name (case-sensitive)\n+     * Get VAT rate for a specific country (case-insensitive)\n+     * @param country The country name (case-insensitive, will be normalized)\n      * @return VAT rate as decimal (e.g., 0.25 for 25%)\n      * @throws IllegalArgumentException if country is not supported\n      */\n     fun getVatRate(country: String): Double {\n-        return vatRates[country] \n-            ?: throw IllegalArgumentException(\"Unsupported country: $country. Supported countries: ${vatRates.keys}\")\n+        val normalizedCountry = country.trim().lowercase()\n+        return vatRates[normalizedCountry] \n+            ?: throw IllegalArgumentException(\"Unsupported country: $country. Supported countries: Sweden, Germany, France\")\n     }\n     \n     /**\n-     * Check if a country is supported for VAT calculation\n+     * Check if a country is supported for VAT calculation (case-insensitive)\n      * @param country The country name to check\n      * @return true if country is supported, false otherwise\n      */\n     fun isCountrySupported(country: String): Boolean {\n-        return vatRates.containsKey(country)\n+        val normalizedCountry = country.trim().lowercase()\n+        return vatRates.containsKey(normalizedCountry)\n     }\n     \n     /**\n      * Get list of all supported countries\n-     * @return Set of supported country names\n+     * @return Set of supported country names (properly capitalized)\n      */\n     fun getSupportedCountries(): Set<String> {\n-        return vatRates.keys\n+        return setOf(\"Sweden\", \"Germany\", \"France\")\n     }\n }\n\\ No newline at end of file\n"
                }
            ],
            "date": 1769775282164,
            "name": "Commit-0",
            "content": "package io.nexure.discount.service\n\n/**\n * Service for calculating VAT rates based on country\n * Contains the business logic for country-specific tax calculations\n */\nobject VatService {\n    \n    // VAT rates as specified in the requirements\n    private val vatRates = mapOf(\n        \"Sweden\" to 0.25,   // 25%\n        \"Germany\" to 0.19,  // 19%\n        \"France\" to 0.20    // 20%\n    )\n    \n    /**\n     * Get VAT rate for a specific country\n     * @param country The country name (case-sensitive)\n     * @return VAT rate as decimal (e.g., 0.25 for 25%)\n     * @throws IllegalArgumentException if country is not supported\n     */\n    fun getVatRate(country: String): Double {\n        return vatRates[country] \n            ?: throw IllegalArgumentException(\"Unsupported country: $country. Supported countries: ${vatRates.keys}\")\n    }\n    \n    /**\n     * Check if a country is supported for VAT calculation\n     * @param country The country name to check\n     * @return true if country is supported, false otherwise\n     */\n    fun isCountrySupported(country: String): Boolean {\n        return vatRates.containsKey(country)\n    }\n    \n    /**\n     * Get list of all supported countries\n     * @return Set of supported country names\n     */\n    fun getSupportedCountries(): Set<String> {\n        return vatRates.keys\n    }\n}"
        }
    ]
}